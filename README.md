# AY: turbo + workspaces + vite (customized `npx create-turbo -e with-vite`)

## How it was created
 - npx create-turbo -e with-vite
   then select yarn(!) there (not use "yarn create turbo" because it not works)

 - in dir upgrade yarn to latest BERRY version (2+)
   yarn set version stable

 - setup yarn to loose mode (to be compatible with eslint module loader)
   in .yarnrc.yml:
     enableGlobalCache: false
     nodeLinker: node-modules
     pnpMode: strict  #loose

 - clone ui to ui2 and add react manually there
 - clone web to web2 and add react (ui2 react component usage) manually


 - add to packages/config-typescript/base.json:
    /* free typing */
    "noImplicitAny": false,
    "noImplicitThis": false,
    "allowJs": true,
    "checkJs": true

   Note: basically can use import ts config from @wttsolutions/eslint-config but ts json config extending looks poor

 - create `packages/config-eslint` package with add eslint and prettier configs basing on from `@wttsolutions/eslint-config`

   ```
   yarn workspace @repo/eslint-config add -D @wttsolutions/eslint-config
   ````

   Note: Avoid using eslint FORMATTING rules, format via prettier
   (see https://github.com/eslint/eslint/issues/17522)

   Note: eslint & prettier inside the project top package.json is correct (and is generated by `npx create-turbo` correspondently). Otherwise those tools cannot format workspace sources (some eslint import issues)

   Note: to deny "yarn" warning:
   ```
    ➤ YN0002: │ @repo/eslint-config@workspace:packages/config-eslint doesn't provide eslint (p6cd8b), requested by eslint-config-prettier.
   ```
   add peer eslint dependency to packages/config-eslint/package.json:
   ```
     "peerDependencies": {
       "eslint": ">=7.0.0"
     }
   ```
   (same as node_modules/eslint-config-prettier/package.json

   Note: `package.json` exports section is made similar to `@wttsolutions/eslint-config` but it'sn not necessary

 - add ui2 <a name="ui2"></a> (packages/ui + react)

   Note: keep `packages/ui` folder untouched to have example of original sources

   Make `package.json->lint` everything (not only ts):
   ```
   "lint": "eslint ."
   ```


 - add web2 (packages/web + react + import from ui2)

   Note: keep `apps/web` folder untouched to have example of original sources.

   Implements React

   Implements workspaces import ([ui2](ui2))

   Uses different file types (js, jsx, ts, tsx) (see apps/web2/src/aa*)

   Make `package.json->lint` everything (not only ts):
   ```
   "lint": "eslint src"
   ```


### Notes

 - What should work in vscode<a name="what_should_work"></a>:
   - correctly show typescript & jsx syntax
   - prettier code autofix
   - eslint show errors and can call "Eslint: fix all auto-fixable problems"
   - "go to definition should work (including other workspaces libraries)

 - `nodeLinker: node-modules` option

 yarn pnp mode is problematic with vscode (even with `yarn dlx @yarnpkg/sdks vscode`) (see [What should work in vscode](#what_should_work) above)

   that's why `nodeLinker: node-modules` compatible option is used

- (obsolete: pnpify seems not necessary if use `nodeLinker: node-modules`)

  to use emacs use pnpify:
   ```
   yarn add -D @yarnpkg/pnpify
   yarn pnpify emacs .
   ```
 - (need recheck) typescript 5.2 "go to definition" not works


# ORIGINAL README:

# `Turborepo` Vite starter

This is an official starter Turborepo.

## Using this example

Run the following command:

```sh
npx create-turbo@latest -e with-vite
```

## What's inside?

This Turborepo includes the following packages and apps:

### Apps and Packages

- `docs`: a vanilla [vite](https://vitejs.dev) ts app
- `web`: another vanilla [vite](https://vitejs.dev) ts app
- `ui`: a stub component & utility library shared by both `web` and `docs` applications
- `eslint-config-custom`: shared `eslint` configurations
- `tsconfig`: `tsconfig.json`s used throughout the monorepo

Each package and app is 100% [TypeScript](https://www.typescriptlang.org/).

### Utilities

This Turborepo has some additional tools already setup for you:

- [TypeScript](https://www.typescriptlang.org/) for static type checking
- [ESLint](https://eslint.org/) for code linting
- [Jest](https://jestjs.io) test runner for all things JavaScript
- [Prettier](https://prettier.io) for code formatting
